/**
 * Created by yyg on 2016/9/6.
 */
$(document).ready(function(){
    //var _charts = charts.init({id: 213,container: "box1"});
    var _charts = echarts.init(document.getElementById('box1'));
    //var _charts2 = charts.init({id: 216,container: "box2"});
    var _charts2 = echarts.init(document.getElementById('box2'));
    initCharts2();
    function initCharts2(){
        var dataMap = {};
        function dataFormatter(obj) {
            var pList = ['煤炭开采业', '煤炭开采业', '煤炭开采业', '煤炭开采业', '煤炭开采业', '煤炭开采业', '煤炭开采业', '煤炭开采业', '煤炭开采业', '煤炭开采业', '煤炭开采业', '煤炭开采业'];
            var temp;
            for (var year = 2002; year <= 2011; year++) {
                var max = 0;
                var sum = 0;
                temp = obj[year];
                for (var i = 0, l = temp.length; i < l; i++) {
                    max = Math.max(max, temp[i]);
                    sum += temp[i];
                    obj[year][i] = {
                        name: pList[i],
                        value: temp[i]
                    }
                }
                obj[year + 'max'] = Math.floor(max / 100) * 100;
                obj[year + 'sum'] = sum;
            }
            return obj;
        }

        dataMap.dataGDP = dataFormatter({
            //max : 60000,
            2011: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2010: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2009: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2008: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2007: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2006: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2005: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2004: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2003: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2002: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55]
        });

        dataMap.dataPI = dataFormatter({
            //max : 4000,
            2011: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2010: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2009: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2008: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2007: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2006: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2005: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2004: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2003: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2002: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55]
        });

        dataMap.dataSI = dataFormatter({
            //max : 26600,
            2011: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2010: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2009: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2008: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2007: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2006: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2005: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2004: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2003: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2002: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55]
        });

        dataMap.dataTI = dataFormatter({
            //max : 25000,
            2011: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2010: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2009: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2008: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2007: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2006: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2005: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2004: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2003: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2002: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55]
        });

        dataMap.dataEstate = dataFormatter({
            2011: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2010: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2009: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2008: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2007: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2006: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2005: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2004: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2003: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2002: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55]
        });

        dataMap.dataFinancial = dataFormatter({
            2011: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2010: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2009: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2008: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2007: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2006: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2005: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2004: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2003: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55],
            2002: [16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55, 16251.93, 11307.28, 24515.76, 11237.55]
        });


        var option = {
            baseOption: {
                timeline: {
                    // y: 0,
                    x:20,
                    x2:20,
                    axisType: 'category',
                    // realtime: false,
                    // loop: false,
                    autoPlay: true,
                    // currentIndex: 2,
                    playInterval: 3000,
                    // controlStyle: {
                    //     position: 'left'
                    // },
                    controlStyle:{
                        position:'left',
                        normal:{
                            color:'#304654'
                        }
                    },
                    data: [
                        '2002-01-01', '2003-01-01', '2004-01-01', {
                            value: '2005-01-01',
                            tooltip: {
                                formatter: '{b} GDP达到一个高度'
                            },
                            symbol: 'diamond',
                            symbolSize: 16
                        },
                        '2006-01-01', '2007-01-01', '2008-01-01', '2009-01-01', '2010-01-01', {
                            value: '2011-01-01',
                            tooltip: {
                                formatter: function(params) {
                                    return params.name + 'GDP达到又一个高度';
                                }
                            },
                            symbol: 'diamond',
                            symbolSize: 18
                        },
                    ],
                    label: {
                        formatter: function(s) {
                            return (new Date(s)).getFullYear();
                        }
                    }
                },
                color:["#efa65e","#5cb8ff","#66d144","#f27538"],
                tooltip: {},
                legend: {
                    show:false,
                    x: 'right',
                    data: ['第一产业', '第二产业', '第三产业', 'GDP']
                },
                calculable: true,
                grid: {
                    top: 80,
                    bottom: 100,
                    left:110,
                    right:50
                },
                xAxis: [{
                    'type': 'category',
                    'axisLabel': {
                        'interval': 0
                    },
                    'data': [
                        '1月', '二月', '三月', '四月', '五月', '六月', '七月', '八月',
                        '九月', '十月', '十一月', '十二月'
                    ],
                    splitLine: {
                        show: false
                    }
                }],
                yAxis: [{
                    type: 'value',
                    name: '',
                    axisLabel:{
                        formatter:'{value}千万元'
                    }
                }],
                series: [{
                    name: 'GDP',
                    type: 'bar'
                }]
            },
            options: [{
                series: [{
                    data: dataMap.dataGDP['2002']
                }]
            }, {
                series: [{
                    data: dataMap.dataGDP['2003']
                }]
            }, {
                series: [{
                    data: dataMap.dataGDP['2004']
                }]
            }, {
                series: [{
                    data: dataMap.dataGDP['2005']
                }]
            }, {
                series: [{
                    data: dataMap.dataGDP['2006']
                }]
            }, {
                series: [{
                    data: dataMap.dataGDP['2007']
                }]
            }, {
                series: [{
                    data: dataMap.dataGDP['2008']
                }]
            }, {
                series: [{
                    data: dataMap.dataGDP['2009']
                }]
            }, {
                series: [{
                    data: dataMap.dataGDP['2010']
                }]
            }, {
                series: [{
                    data: dataMap.dataGDP['2011']
                }]
            }]
        };
        _charts2.setOption(option);
    }
    $.get('../js/qingdao.json', function(chinaJson) {
        echarts.registerMap('qingdao', chinaJson);
        option = {
            title: {
                text: '',
                left: 'center',
                textStyle: {
                    color: '#fff'
                }
            },
            tooltip: {
                trigger: 'item',
                borderWidth:1,
                borderColor:'red',
                backgroundColor:'rgba(255,255,255,.9)',
                padding:10,
                formatter:function(a){
                    return '<div class="tipbox"><h2>'+a.name+'<small>2015年用电量</small></h2>'+
                        '<p>156万亿千瓦时，同比增长<var  class="c1">2.8%</var></p>'+
                        '</div>'
                }
            },
            visualMap: {
                show:false,
                min: 0,
                max: 6,
                left: 'left',
                top: 'bottom',
                text: ['高','低'],           // 文本，默认为数值文本
                calculable: true,
                // color: ['#57d2ff', '#2ca8ff','#108fe5','#108fe5','#18a5ff','#033287' ],
                color:["red",'yellow'],
                textStyle: {
                    color: '#fff'
                },
            },
            series: [
                {
                    name: '商品举报数量',
                    type: 'map',
                    mapType: 'qingdao',
                    roam: false,
                    itemStyle: {
                        normal: { label: { show: true,textStyle:{color:'#fff'}} },
                        emphasis: { label: { show: true} }
                    },
                    showLegendSymbol: true,
                    data: [
                        { name: '市南区', value: 103},
                        { name: '市北区', value: 14 },
                        { name: '黄岛区', value: 1 },
                        { name: '崂山区', value: 3 },
                        { name: '李沧区', value: 2 },
                        { name: '城阳区', value: 41 },
                        { name: '胶州市', value: 22 },
                        { name: '即墨市', value: 4 },
                        { name: '平度市', value: 15 },
                        { name: '莱西市', value: 6 }
                    ]
                }
            ]
        };
        _charts.setOption(option);
    });
});